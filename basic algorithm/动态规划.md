# åŠ¨æ€è§„åˆ’

## èƒŒåŒ…é—®é¢˜

ç•¥

## åŒºé—´ DP

### [282. çŸ³å­åˆå¹¶](https://www.acwing.com/problem/content/284/)

è®¾æœ‰ N å †çŸ³å­æ’æˆä¸€æ’ï¼Œå…¶ç¼–å·ä¸º 1,2,3,â€¦,Nã€‚

æ¯å †çŸ³å­æœ‰ä¸€å®šçš„è´¨é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°æ¥æè¿°ï¼Œç°åœ¨è¦å°†è¿™ N å †çŸ³å­åˆå¹¶æˆä¸ºä¸€å †ã€‚

æ¯æ¬¡åªèƒ½åˆå¹¶ç›¸é‚»çš„ä¸¤å †ï¼Œåˆå¹¶çš„ä»£ä»·ä¸ºè¿™ä¸¤å †çŸ³å­çš„è´¨é‡ä¹‹å’Œï¼Œåˆå¹¶åä¸è¿™ä¸¤å †çŸ³å­ç›¸é‚»çš„çŸ³å­å°†å’Œæ–°å †ç›¸é‚»ï¼Œåˆå¹¶æ—¶ç”±äºé€‰æ‹©çš„é¡ºåºä¸åŒï¼Œåˆå¹¶çš„æ€»ä»£ä»·ä¹Ÿä¸ç›¸åŒã€‚

é—®é¢˜æ˜¯ï¼šæ‰¾å‡ºä¸€ç§åˆç†çš„æ–¹æ³•ï¼Œä½¿æ€»çš„ä»£ä»·æœ€å°ï¼Œè¾“å‡ºæœ€å°ä»£ä»·ã€‚

### é—®é¢˜åˆ†æ

ç›®æ ‡æ˜¯åˆå¹¶åŒºé—´ `[i, j]`ï¼Œä½†æ¯æ¬¡åªèƒ½åˆå¹¶ç›¸é‚»çš„ä¸¤å †çŸ³å­ï¼Œè¿™æ„å‘³ç€éœ€è¦æŠŠ `[i, j]` åˆ†æˆä¸¤å¤§å †çŸ³å­ `[i, k]` å’Œ `[K+1, j]`ï¼Œæœ€ç»ˆçš„ä»£ä»·å°±æ˜¯ï¼šåˆ†åˆ«åˆå¹¶ä¸¤å¤§å †çŸ³å­ `[i, k]` å’Œ `[k+1, j]` å„è‡ªçš„ä»£ä»·ï¼ŒåŠ ä¸Šåˆå¹¶ä»–ä»¬çš„æ€»ä»£ä»·ï¼ˆä¹Ÿå³ï¼ŒåŒºé—´ `[i, j]` çš„å’Œï¼‰

### é€’æ¨å…¬å¼

```C++
// æšä¸¾ k from i to j-1
// f[i][j] åˆå¹¶åŒºé—´ [i, j] çš„æœ€å°ä»£ä»·
// s[j] - s[i-1] åŒºé—´ [i, j] çš„å’Œ
f[i][j] = min(f[i][j], f[i][k] + f[k+1][j] + s[j] - s[i-1]);
```

### ä»£ç 

```C++
// è®°æœ
int n, a[N], s[N], f[N][N];
memset(f, -1, sizeof f);

int dfs(int i, int j) {
    if (f[i][j] != -1) return f[i][j];

    if (i == j) return f[i][j] = 0;
    // æšä¸¾æ‹†åˆ†æˆä¸¤ä¸ªåŒºé—´çš„ä½ç½®
    // [i, j]->[i, k]å’Œ[k+1, j]
    int res = INF;
    for (int k = i; k < j; k++) {
        res = min(res, dfs(i, k) + dfs(k+1, j) + s[j] - s[i-1]);
    }
    return f[i][j] = res;
}
// é€’æ¨
// å…ˆæšä¸¾åŒºé—´é•¿åº¦
// é•¿åº¦ä¸º 1 çš„åŒºé—´ f[i][j] = 0
for (int len = 2; len <= n; len++) {
    // æšä¸¾åŒºé—´å·¦ç«¯ç‚¹
    for (int i = 1; i + len - 1 <= n; i++) {
        // è®¡ç®—åŒºé—´å³ç«¯ç‚¹
        int j = i + len - 1;
        // æšä¸¾æ‹†åˆ†åŒºé—´çš„ä½ç½®
        f[i][j] = 1e9;
        for (int k = i; k < j; k++) {
            f[i][j] = min(f[i][j], f[i][k] + f[k+1][j] + s[j] - s[i-1]);
        }
    }
}
// è¾“å‡ºç­”æ¡ˆ
cout << f[1][n] << endl;
```

## è®¡æ•°ç±» DP

[900. æ•´æ•°åˆ’åˆ†](https://www.acwing.com/problem/content/902/)

### æ–¹æ³•ä¸€ï¼šè½¬åŒ–æˆå®Œå…¨èƒŒåŒ…é—®é¢˜

è½¬åŒ–ğŸ‘ï¼šä¸€ä¸ªå®¹é‡æ˜¯ n çš„èƒŒåŒ…ï¼Œç‰©å“çš„ä½“ç§¯åˆ†åˆ«æ˜¯ 1~nï¼Œæ¯ç§ç‰©å“æœ‰æ— é™ä¸ªï¼Œé—®æ°å¥½è£…æ»¡èƒŒåŒ…çš„æ–¹æ¡ˆæ•°æ˜¯å¤šå°‘ï¼Ÿ

```C++
// åˆå§‹åŒ–
f[0] = 1;
// æšä¸¾ç‰©å“
for (int i = 1; i <= n; i++) {
    // æšä¸¾ä½“ç§¯
    // å®Œå…¨èƒŒåŒ… æ­£å‘æšä¸¾å°±è¡Œ
    for (int j = i; j <= n; j++) {
        // è®¡ç®—æ–¹æ¡ˆæ•°
        f[j] = ((LL)f[j] + f[j-i]) % MOD;
    }
}
cout << f[n] << endl;
```

### æ–¹æ³•äºŒï¼š

#### çŠ¶æ€è¡¨ç¤º

`f[i][j]` è¡¨ç¤ºæ‰€æœ‰æ€»å’Œæ˜¯ i å¹¶ä¸”æ°å¥½åˆ†æˆ j ä¸ªæ•°çš„å’Œçš„æ–¹æ¡ˆçš„æ•°é‡

#### çŠ¶æ€è®¡ç®—

`f[i][j]` åˆ’åˆ†æˆ**æœ€å°å€¼æ˜¯ 1** å’Œ**æœ€å°å€¼å¤§äº 1** çš„ä¸¤ç§æƒ…å†µ

- æœ€å°å€¼æ˜¯ 1 çš„æƒ…å†µæ¥è‡ªäºï¼š`f[i-1][j-1]`ï¼Œä¹Ÿå°±æ˜¯å‘æ€»å’Œæ˜¯ i-1 å¹¶ä¸”æ°å¥½åˆ†æˆ j-1 ä¸ªæ•°çš„å’Œçš„æ–¹æ¡ˆä¸­åŠ ä¸€ä¸ª 1ï¼Œä¾¿ç»„æˆäº† `f[i][j]`

- æœ€å°å€¼å¤§äº 1 çš„æƒ…å†µæ¥è‡ªäºï¼š`f[i-j][j]`ï¼Œä¹Ÿå°±æ˜¯å‘æ€»å’Œæ˜¯ i-j å¹¶ä¸”æ°å¥½åˆ†æˆ j ä¸ªæ•°çš„å’Œçš„æ–¹æ¡ˆä¸­çš„æ¯ä¸€ä¸ªæ•°åŠ  1ï¼Œä¾¿å¾—åˆ°äº† `f[i][j]`

`f[i][j]` åªä¼šæ¥è‡ªäºä¸Šè¿°ä¸¤ç§æƒ…å†µï¼Œå¾—åˆ°é€’æ¨å…¬å¼ï¼š`f[i][j] = f[i-1][j-1] + f[i-j][j]` 

#### ç­”æ¡ˆ

ç­”æ¡ˆå°±æ˜¯ 1 ~ n æ‰€æœ‰æƒ…å†µçš„æ±‚å’Œï¼š`ans = f[n][1] + f[n][2] + ... + f[n][n]`

```C++
f[0][0] = 1;
// æšä¸¾å’Œ
for (int i = 1; i <= n; i++) {
    // æšä¸¾ä¸ªæ•°
    for (int j = 1; j <= i; j++) {
        f[i][j] = (f[i-1][j-1] + f[i-j][j]) % MOD;
    }
}
int res = 0;
for (int i = 1; i <= n; i++) res = (res + f[n][i]) % MOD;
cout << res << endl;
```

## æ•°ä½ç»Ÿè®¡ DP

### é—®é¢˜åŸå‹

è®¡ç®—æ•°å­— a ~ b ä¸­ 1 å‡ºç°çš„æ¬¡æ•°ï¼Œæ•°æ®èŒƒå›´ `1e8`ã€‚ä¸¾ä¾‹ï¼š1 ~ 12 ä¸­ 1 å‡ºç°çš„æ¬¡æ•°ï¼ŒåŒ…å« 1 çš„æ•°å­—ï¼š1ã€11ã€10ã€12ï¼Œåˆ™ 1 å‡ºç°çš„æ¬¡æ•°æ˜¯ï¼š5

### åˆ†æ

å¦‚æœæš´åŠ›æ±‚è§£çš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ï¼š1e8 * 8ï¼Œè‚¯å®šè¶…æ—¶

#### åˆ†æƒ…å†µè®¨è®º

ä¸¾ä¾‹ï¼š`1 ~ n, i, n = abcdefg` åˆ†åˆ«æ±‚å‡º i åœ¨æ¯ä¸€ä½ä¸Šå‡ºç°çš„æ¬¡æ•°

å…ˆæ±‚ i åœ¨ç¬¬ 4 ä½ä¸Šå‡ºç°çš„æ¬¡æ•°ï¼Œ`1 <= xxxiyyy <= abcdefg`

1. å½“ xxx = 000 ~ abc-1 æ—¶ï¼Œyyy çš„å–å€¼æ— çº¦æŸï¼š000 ~ 999ï¼Œåˆ™æœ‰ abc * 1000 ç§é€‰æ³•

2. å½“ xxx = abc æ—¶ï¼Œå†åˆ†æƒ…å†µè®¨è®ºï¼š

    - è‹¥ d < iï¼Œåˆ™ abc1yyy > abc0yyyï¼Œå…¶ä¸­ d = 0ï¼Œåˆ™æ–¹æ¡ˆæ•°å°±æ˜¯ 0

    - è‹¥ d = iï¼Œyyy = 000 ~ efgï¼Œåˆ™æ–¹æ¡ˆæ•°æ˜¯ 1 + efg
    - è‹¥ d > iï¼Œyyy çš„å–å€¼æ— çº¦æŸï¼š000 ~ 999ï¼Œåˆ™æœ‰ 1000 ç§é€‰æ³•

ä¸Šè¿°ä¸¤ç§æƒ…å†µçš„æ–¹æ¡ˆæ•°åŠ åˆ°ä¸€èµ·å°±æ˜¯ i åœ¨ç¬¬ 4 ä½ä¸Šå‡ºç°çš„æ¬¡æ•°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ç¬¬ 4 ä½ä¸Šæ˜¯ i çš„æ•°çš„ä¸ªæ•°ã€‚

æ—¶é—´å¤æ‚åº¦ï¼šæšä¸¾ 8 ä½ * æ¯ä¸€ä½æœ€å¤š 10 æ¬¡è¿ç®—

#### è¾¹ç•Œé—®é¢˜ï¼š

- å½“ i å‡ºç°åœ¨æœ€é«˜ä½æ—¶ï¼šæƒ…å†µ 1 ä¸å­˜åœ¨ï¼Œåªç®—ç¬¬äºŒç§æƒ…å†µ
- åœ¨æšä¸¾ i = 0 æ—¶ï¼Œç”±äºä¸èƒ½æœ‰å‰å¯¼é›¶ï¼Œå‰ 3 ä½åº”è¯¥ä» 001 å¼€å§‹ 

## çŠ¶æ€å‹ç¼©DP

[AcWing 291. è’™å¾·é‡Œå®‰çš„æ¢¦æƒ³](https://www.acwing.com/activity/content/problem/content/1010/)

### æ€è·¯åˆ†æ

å…ˆæ”¾æ¨ªç€çš„æ–¹å—ï¼Œå†æ”¾ç«–ç€çš„æ–¹å—ã€‚æ¨ªç€çš„æ”¾å®Œï¼Œç«–ç€çš„ç›´æ¥æ’è¿›å»å°±è¡Œã€‚æ‰€ä»¥ï¼Œæ–¹æ¡ˆæ€»æ•°ç­‰äºåªæ”¾æ¨ªç€çš„å°æ–¹å—çš„åˆæ³•æ–¹æ¡ˆæ•°ã€‚

å¦‚ä½•åˆ¤æ–­å½“å‰æ–¹æ¡ˆæ˜¯å¦åˆæ³•ï¼Ÿæ‰€æœ‰å‰©ä½™ä½ç½®ï¼Œèƒ½å¦å¡«å……æ»¡ç«–ç€çš„å°æ–¹å—ã€‚å¯ä»¥æŒ‰åˆ—æ¥çœ‹ï¼Œæ¯ä¸€åˆ—å†…éƒ¨æ‰€æœ‰è¿ç»­çš„ç©ºç€çš„å°æ–¹å—ï¼Œéœ€è¦æ˜¯å¶æ•°ä¸ª

### çŠ¶æ€è¡¨ç¤º

`f[i][j]` è¡¨ç¤ºå·²ç»å°†å‰ `i-1` åˆ—æ‘†å¥½ï¼Œä¸”ä»ç¬¬ `i-1` åˆ—ï¼Œä¼¸å‡ºåˆ°ç¬¬ `i` åˆ—çš„çŠ¶æ€æ˜¯ `j` çš„æ‰€æœ‰æ–¹æ¡ˆ

ä¸¾ä¾‹ï¼š

`*` è¡¨ç¤ºæ‘†å¥½äº†ï¼Œ`-` è¡¨ç¤ºæœªæ‘†æ”¾ï¼Œåˆ™ä¸‹è¿°çŠ¶æ€æ˜¯ `i = 2, j = 0b11001`
```C++
   0 1 2 3 4 5
0  * * * - - - 
1  * * * - - -
2  * * - - - -
3  * * - - - -
4  * * * - - -
```
è§£é‡Šï¼šç¬¬ `i-1=1` åˆ—å·²ç»å…¨éƒ¨æ‘†æ»¡äº†ï¼Œä»ç¬¬ `i-1=1` åˆ—ï¼Œä¼¸å‡ºåˆ°ç¬¬ `i=2` åˆ—çš„çŠ¶æ€æ˜¯ `11001`

### çŠ¶æ€è®¡ç®—

å‡è®¾ `f[i][j]` ç”± `f[i-1][k]` è½¬ç§»è€Œæ¥ï¼Œåˆ™çŠ¶æ€ `k` å’Œ `j` ä¹‹é—´å¿…é¡»æ»¡è¶³ä»¥å®šçš„å…³ç³»ï¼š

- ä¸é‡å  `(k & j) == 0`
- æ‰€æœ‰è¿ç»­ç©ºç€çš„ä½ç½®çš„é•¿åº¦å¿…é¡»æ˜¯å¶æ•°

ç­”æ¡ˆå°±æ˜¯ `f[m][0]` è¡¨ç¤ºå‰ `m` åˆ—å…¨éƒ¨æ‘†æ»¡ï¼Œä¸”ä¼¸å‡ºçš„çŠ¶æ€æ˜¯ `0`

#### é¢„å¤„ç†

é¢„å¤„ç†æœ‰å“ªäº›çŠ¶æ€ k å¯ä»¥æ›´æ–°åˆ° j

[91. æœ€çŸ­Hamiltonè·¯å¾„](https://www.acwing.com/problem/content/93/)

> åˆåï¼Œæ—…è¡Œå•†é—®é¢˜ã€‚ä¸€ä¸ª NP å®Œå…¨é—®é¢˜ï¼šè®¡ç®—æœºæ²¡åŠæ³•åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚å‡ºé—®é¢˜çš„è§£

#### æ ¸å¿ƒæ€è·¯

1. å“ªäº›ç‚¹è¢«ç”¨è¿‡
2. ç›®å‰åœåœ¨å“ªä¸ªç‚¹ä¸Š

çŠ¶æ€çš„æ•°é‡ï¼šç”¨è¿‡çš„ç‚¹çš„çŠ¶æ€ `2^20 * 20` ä¸ªç‚¹

### çŠ¶æ€è¡¨ç¤º

`f[state][j]` è¡¨ç¤ºï¼Œå½“å‰ state ä¸‹ï¼Œåœåœ¨äº† j ç‚¹ä¸Š

### çŠ¶æ€è®¡ç®—

`f[state][j] = f[state_k][k] + w[k][j]`ï¼Œè§£é‡Šï¼š`state_k + j = state`ï¼Œä¹Ÿå³ï¼Œ`state_k` è¡¨ç¤º `state` é™¤æ‰ `j` è¿™ä¸ªç‚¹ä¹‹åçš„é›†åˆï¼Œä¸” `state_k` åŒ…å« `k`

æ—¶é—´å¤æ‚åº¦ï¼šçŠ¶æ€çš„æ•°é‡ * 20 ä¸ªç‚¹ = `2^20 * 20 * 20`ï¼Œè§£é‡Šï¼šæ‰€æœ‰çŠ¶æ€çš„æ•°é‡æ›´æ–°å…¶ä½™ 20 ä¸ªç‚¹

ç­”æ¡ˆå°±æ˜¯ `f[(1 << n) - 1][n-1]`ï¼Œéå†æ‰€æœ‰çš„çŠ¶æ€ï¼Œä¸”æœ€ç»ˆç‚¹åœ¨ n - 1 ä¸Š

## æ ‘å½¢ DP

[285. æ²¡æœ‰ä¸Šå¸çš„èˆä¼š](https://www.acwing.com/problem/content/287/)

### çŠ¶æ€è¡¨ç¤º

`f[u][0]` è¡¨ç¤ºä»æ‰€æœ‰ä»¥ u ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰æ‹©ï¼Œå¹¶ä¸”ä¸é€‰ u è¿™ä¸ªç‚¹çš„æ–¹æ¡ˆæ•°

`f[u][1]` è¡¨ç¤ºä»æ‰€æœ‰ä»¥ u ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰æ‹©ï¼Œå¹¶ä¸”é€‰ u è¿™ä¸ªç‚¹çš„æ–¹æ¡ˆæ•°

å±æ€§: `max`

### çŠ¶æ€è®¡ç®—

å‡è®¾ u çš„å„¿å­ï¼šs1, s2, ..., si, ...

`f[u][0]` åº”å½“æ˜¯å­æ ‘å–æœ€å¤§

- `f[u][0] += max(f[si][0], f[si][1])`

`f[u][1]` åªèƒ½æ˜¯ä¸é€‰å„¿å­èŠ‚ç‚¹æƒ…å†µä¸‹å–æœ€å¤§

- `f[u][1] += f[si][0]`

æ—¶é—´å¤æ‚åº¦ï¼šO(n)









